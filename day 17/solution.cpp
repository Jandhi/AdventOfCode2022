#include<iostream>
#include<string>
#include<sstream>
#include<fstream>
#include<set>
using namespace std;

// I am sorry, too lazy to deal with reading the file at this point
string jets = ">>><>><<>>>><<<<>>><<><<>>><<<>>><<>><<<>>><<>>>><<<>>>><<<<><<>><<<><<><<><<<<>>>><>><<<<>>>><<>>>><<<>>>><<<<>><<<<>><<>>><>>><>>>><<<><<><<<<><>>><<<>>>><<<><<>><<<<>><<<<>><<<<>>><<>>>><<<><<<><<>>><>><<<<>>>><<<<>><<>><<<<>><<<<>>><<<>>><<<>>>><<<<>>><><<>>>><<>><<<<>>><<<<>><<<<><<<<>>><<<<>>>><<<<><<<>>>><<<>>><<<<>><<<>>><<<<><<<<>>>><>>>><<<>>>><>>>><<>>>><<<>><<<<>>><<<>>>><><<<><<<>><<>>><>>><<<<>><<>>><<<>>>><<<>><<<>>><<<<>>>><<>>><>><<<>><<<>>><<<<>>>><>>><<>>><>>><>>><<>>><<>>><<<<>>><>>>><>>>><<<<>>>><><>><<>><<<><<<>>><<<>>><>>>><<<<>>>><<<<>>><<>><<<>>>><<<<><>>><<>>>><<<>><<<<>>>><<<<>>>><<>>>><<<><<<<>><<>>>><><><<<>>>><<<<><><<<<>>><<<>><<>>><<><><<<<>>><<>><<<<><>>>><<<>>>><<<<><<<>>><><<<<>><>><<<<>>><<<<><>><<<<>>><<>>>><>>><<<><<>><<<<>>>><<<>><<<><<<><<<><<<<>><<>><<><<<<>>><<<>>><<><>>><<>>>><<<>>><<>><<<>>><<>>><<>>>><>>>><<<<>><<<<><<<><<<<>>><<>><<<>><<<>>><<<>><><<<>>>><<<>>><><<<<>>><>>>><<<<><<>>><>>>><<<<>><<<<>>>><<>>>><<>>>><<<<>><>>>><>>>><<<><>>><<<<>>>><<>>><<<><>>><><<>>>><<<>>><<<<><<><<<>>>><<>><<<<>>>><<<>><<>>>><<<<>><<><>><<>>><><<<<><<<>><><<<<><<<<>><><<>>>><<<<><<>><<>>>><<<>>><>><<<>>><<<<>><<<<><>>>><<><<<>><<>>><>>><<<>>><<>>>><<<<>>>><<<<><<>>><<<<><<>>>><<>>><<>><><<<><>>>><<<<>><<><<>><<<<>><>>>><><<>>><<>>><>>>><<<<>>><<><<<<><<<>><<<<>><>>><>><<<<><<>>>><<<<><><>><>>><<>>>><>>>><<<<>>><>><><<<>><<><<<>>><<<>>>><<<><><<<>><<<<>>>><>>><<><>><<<>>><<>><<<<>><<<>><<<<><<<<>>>><<>><<<<>>><<<>>>><<<>><<<<>><<<<>>><<>>>><<<>>>><<<>><<<>><>><<<<>><><<>><<<<><<<><<<><<<>><<><<><<<<>>>><<<>>><<<>>><><<<<>>><<<>>>><<<<>>><>><<<>>><><<<<>>>><<<><<<<><<<>>><<<><<><>>>><<<<>>><>>><><>><<>>><<<<>>>><><<>>><><<<>>><<<<>><<<<>><>><>>>><<>><<>><>><<<<>>>><<<>>>><>><<<>>><<<>>>><>>>><>><<<><>>><>>>><>>><>>><<><<>>>><>><<><<>><<>><<<>>><<<>>>><<<<>>>><<>><<>><<<<>><<<><><>><<<><<<>>>><<<<><<<<>><>>>><<<>>><>>><>>><<<>><<<<><<<<>>><<<<>>>><>>>><<>>><<<<><<<<><<>>>><><<<<>><<<><<<><>><<<>>><<>>>><>>>><>>><<<>>><>><<>><<<>><<<<>><>>>><<><>><>>>><<<<><<<>>>><<<<>>><<<>>>><<<<>><<>>><>><<><>>><<<<>>><<<>>><>>><<>>><<<>>><<<<>>><<<>>><<<<>>><<<<>>>><<<><<<>>>><<<<>>>><><><<<<>>><>>>><>><>>>><<<<><<>>>><>><<<><<<>><<<>><<>>>><<<>>>><>>>><<<<>>>><><<<<><<>><<>>>><>><<<><<>>>><<>>>><<<>>><<<<>><<>>><<<<>>>><<<<>>><<<<><<<>>><<<>><<<>>>><<>>><<<>><<<><<<<>>><>>><<<<><<>>><>><>><<><<<<>><>>>><<<<>>>><>><<<>>><<<<>>><>>>><<<>>>><<>><<><<><<><>>><<<><<>>><<>><>>><>>><<<><>>><<><><<>>>><<>>><<><>><<>>><<<>>><<<<>><><<<>>><><<><<<><<<><>>>><<>><<<>><>>><<<><<<<>>><<<<>>>><<<><>>><<<><<><>>><<<<><<<>>>><<>><>>><>>><<<<>><<><<<><<<<>>><<>>>><<<<>>>><<<<><><<<>>><<>>><>>><<<<>><>>><<<<>>>><<>>><<<>>><>>><<<>>>><>>><<<<>><<<<>>><<<<>>><<>><>>>><<>><<>>>><<<>>><>>><<<>>><<<<>><>>><<<<>>><<<<>>><<<<><<<<>>>><<<<>><>>>><<>><<>><<<<><>>>><<<>><>>>><<><<<>>><<<<>><<<<>>><<<>>>><>>><<>>><<<>><><>>>><<<>><<><>>><<<<><<<<>><<<>>><>>>><><<<<>><<<>>>><<<>><<<<>>>><<<>>>><<<<>>>><<<>><>><><<<<>>>><><>><<>>><<<<>>><<<>>>><<>>>><<<<>>>><<<<><<<>><<>>>><>>><<<<>>>><>>><<<<>><<<>>><<<>>><<><<<><<<<>>><<<>>><<>><<>><<<>>><<<>>><<<><><<<>><<>>>><>><<<>>><<>><<>><<<>>><>>><<<>>><<<<>><<<>>>><<<<>><<>><<<>>>><<>>>><<<><<<<>><<<><>>><<>><<<<><>>><<<>>><>>>><<<<><<<>><<<<><>>>><<<<>><<><>><<<<>>>><<<>>>><<<>>><>>><<<><><>>>><>>>><<>>><<<>>><<<<><<<><<>>>><>><<>>>><<>><<>><<><<><<><>><<<>>>><<<<>><<>>><<><<>>>><>>><<<<><<<<>><<<>>>><<<><<>><<<><><<<>>><<<>>>><<<<>>><>>><>>><<<>>>><><<<<>>><<<>>><<<>>><<>>><<<<>>><<<>>>><<<<>>>><<><<<<><>>><>><>><<<>>>><<>>><>>>><<<<>>><<<><<>><<><<<>>><<<><<<<>>><<>>><<<<>><<<<>><<><<<>>>><<<>>><>>>><<<<>><>>><<>>><<>>>><<>>>><<<><<>>><><<>>><<<><<<><<<<>><<<><<<><<<<>>><<<><<<><<>><<<<>>><<>>><<<<>>><>>>><<<<>>>><>><<>><<>><<><><<<>>><><>>><<<><><><<<<>>><>>><<<<>>>><<<<>>>><<<<>>>><<<<>>><<<<><<<<><<<<>>>><>>>><<>>>><<>><<>>>><<<>>><<<<>>><<<>>>><<<<>>>><>>>><<<<>>>><<<><>>>><<<<><<<>><>>><>>><<<<><>>><<<><<>>>><<<<>>><<<<>><>>>><>>><>>>><<<>>><<>>><<<<><<<>>>><>>>><<<>>><<>><<<><<<>>><<<<><<>><<<>><>>><<<<>>>><<<<>>><><<<>>><>>><<>><<><<>>><<<<>>>><<<>>>><<<<>>>><<<>>><<>><><<<><>><<<>>><<<>>>><<>>><<<>>>><<<<>>><><<<>><<<<><>>><<<<><<<<><<>>><<><>>><>>><<<<>>>><<<<><<><<<<>><>>>><><<<>>><<<>>>><<>><<<>><<>>>><>>>><>>><<<<>>><>>><<>>>><>><<>>><<<<>>>><<<<>>><<<<>><><><<>>><<<<>>><>>>><<<<>>>><<<>><<><<>>><<<>><<<<>>><<>>><<>><<<>>><>>><<><<<><<<<><<<>>>><><<>>><<<>>><>>>><><<<>>>><<>><>>><><<<<><<<>>>><<<<>><><<>><<<>>>><<<<><<>><<<>><<<<>>><><<<<>>><<<><<<>><<<>>><<<>>>><<<<>>><<<<><<>><<<<>><<<<><>>><<<>>>><<>>>><<<<>>><>><<<>>><>><>>>><>>><<<<>>><>>>><<>>><<<<><<<><<<<><<<<>>><<>>><<<><<<>>>><<<<><>>>><><<<><<<<>><<>><<>>><<<>>><<<>>><>><>><<<>>><<<>><>>><<<<><<>><<>>><<<>>>><<<<>>>><<>>><<<<><><><<<>>>><<><>><<>><>>><>>><<>>>><>><>>>><<<><<<>>><><<<<>><<<>><<<<>>><<<<>>><<<><<<<>><>><<><<<><<<<>>><<<><<<>><<<<>><<>><<<<>>><>>>><<><<<<><<<><<>><<<>>><><<<<>>>><<<<>>>><<<>>><>>><>>><>>>><<<<>><>>><>><<<<><<<>>>><<>>><<>><<>><<<<>><<>><<><<<<><<><<<<>>>><<>>><>>>><<>>><>>><<><<>>><>>><<<>>><<>>>><<<>>>><><<<<><<<<>>><<>>>><<>>>><<<<><<<<>>><<>>><<<>>>><><<<>><>><<<<>>>><<>>>><>>><>>><<><<<><<<<>>>><<<>>>><<<>>><<<>>>><>>>><<<>>>><<<>>>><<><>>><<>>>><<><<<><<<<><>><<<>>><<<><<<<><><<<<>>>><<<<>>><<<<>><<>>>><<<>>><<<>><<<<>>><<><<<<>>>><>>><>><>>>><<<>>><<<<>>>><>>><<>>><<<>>>><<>>>><><>><<>>>><<>>><<>>>><<><<>><><<<<><>>>><<<><<<<>><<>>><<>>>><<<><<<>>>><<<<>>>><>><<>><>>><<>><><><>><>>><>>>><<<<><<>><<>>><<<><>>>><>><<<<>>>><<>>><><>>><<<><><><<><<<<>>>><<<>>><<<<>>><<<<>>>><<<>>>><>>>><<>>><<>>><<<>>>><<<>><<<<><<<<>>>><<<<>>><<>><<<<>>>><<<>>>><<<><<<>>><<<<>>><<>>><<<><<<><<>>>><<<<>>>><>>>><>><<<<><<<<>><>>>><><<<<>>><<<<><<<>>><<>><<<><<<<>><<<>>>><<<<>>><><><<><<>><><<>>><<<><>><>>><>>><<<><>>><<<<>>>><<<<><>>><<<>>>><>><<<><<>>><<>>>><<<<>>>><>>><<>>>><>>>><>><<<><<<<>>>><<<>>><<<<>>>><<>>><>>><<<<>><<<<>>><><<>>>><<<><<<>><<<<><>>><<<><<>>><<<<>><<<>>>><<<>>><<<<>>><<<>><<<>>>><<<>><>><<>>>><<<<><<>>>><><>><<>><<<<><<<><>>><<>><<<>>>><<<><>>><<<><<<>>><<<<><<<<><<>>><<<<>>><<>><>>><>>>><>>>><>><<<>>><<<<><><>>><>>>><>>>><<<>><<<>>><>>><<><>><<<<><<<<><<<>>>><><<<<>><<>><<>><<<><<<<>>><<<>><<<<><<<<>>>><<><>><<>><<>>>><>>><>><<<<><><>>>><<<<><<<>>><<<<>>><<<<>><<>><<>>>><<<<>>>><<>>><<<>>><<>><<<>>><<<>><>><<><<<>><<<<>>>><<>>>><<>>><<>>>><<<>>><<>><<<>>><><>><<>>><<<<>>>><<<>><>>>><<><<<>>><<<>>><<<>>>><>>><>><<><>><><<<>><<<>>><>>>><<<<>>>><<<<>>>><>>><<<<>>><<<>>>><>><>>>><<<><><<<>><<>><>>><>>>><<>><<<>>><<<>><<>>>><<<<><<<<>>>><>>><>>>><<<>>><<<<><<<>>>><<>>><<>>><<<<>>>><<<>><<<><<<><<<<>><<<<>>><><>>>><<<<>><<<<>>>><><<<><>>><<<<>><><<>><<<<>>>><<<<>>><<<><<<<><>><<>><>>><>>><<<><<<>>>><<>>><<>><<<<>>><<<><<<>>>><<<>>><><<<>>>><<<<>>>><<>><><>><<>>>><<>>>><><<<<>>><<<<>>>><<<>><>>>><<<<><<<><<<>>>><<<><>>><<<<>><<><<<>><<<<>>>><<>><<<>>><<<>><<<<>>><<>>>><<<<>>>><><<<<>>><<<<>>>><<<>>><<<>><>>><<<<>>><<>><<<>>>><<>><<<>>><>><>><<<<><<<>>><<<>>><<<<>>><<<<><<<<>>>><<<<>>>><<<<>>><<<>>>><<<<>>>><>>>><<<<>>><<<>>><<<<><<<<>>><<>><<><<><<<>>><<>>>><>>><<>>><<<<>>><>>>><<<>><<<><<<<>><<<>>>><<<<>><>><>>><<>>><<><>>>><<><<<>><<<>>>><<>>><<<>>><<<>><<<>>><>>>><<<>>>><<<>>>><<>>>><<>><>>><>>>><>><>>><<<>>><<<<><<<>>>><<>>><>>><<<<>>><<>><>>>><>>>><<><<<>>><<<><<<>>>><<<<>><<<<>><<<<>>>><<>><<><>><><>>>><<>>><<>><<>>>><<<<>><<><<<>>><<><<<<>>>><><>><<<<>>>><<<>>><>><<<>>><<<<>><>>>><<<>>>><<<<>>>><<<<>>><<<><><<>>>><>>><<<<><<<>>><<>>><>><>><<<<><<<>>>><>>><<<<><<<>>>><><<<>>>><>><<>>><<>><<<<>>>><<<<><>>>><<><<<<><<<<>>><>><<<<>>><<<>>><<<<>>>><<<<>>><<>>><<<><<>>><<>>>><<<>>>><<><><<>><>>>><<<<>>>><<<<>>><<<>><<>>>><>><<>><<>>>><<>>>><><<<<>>>><<><><>><>><>><<><<<>>><>><<>><>>><<<>><>>>><<<<><<>>><<>>><<><<<>>>><><<<<>>>><><>>>><<<><<>>><><<>>>><<<<>>><>>><<>>><<>><<><<><<>><<<<><>>><<>><<<>><>>><<<<>><>>>><>>><>><<<>><<>><<<>><<<>>><>><<<<>>><<<>>>><<<>>><><<>><<><<<<>>><>>>><<<>>><<<<><>><<<<><<<<>>>><>>>><<<<><<<<>>><<>>>><<><<<><>><<<<>>><>>><<><<<<>>>><>>><><<<><<<><><<><<<>>><<<<>>><<>>><<<>><<<><>><<<>>>><>>><<<>><<<>><><<>><<<>>>><<>><<<>><<<>>><><<<<>>><<><>><><>>><<>>><<>>>><<<>>>><>><<<>><<<>><>>><>>>><<<>><<<><<<><<<<>>><<<<>>><<<<><>>><><<><<>><<<<><<<<>>><>><<<><<<<>><<><>>>><<<<>>>><<>><<><<<>><<<>>><<<<>>><<<<>>>><<<<>><<>><>>>><<<<>><<<<>>><<<<><<<>>><<><<>>>><>><<<<>>>><<<<>>>><<<<>>>><>><<>><><<><<<<>><<>><<<<>>><>><<<>>>><<<<>>><<>><<><<<<>>><<<<>>>><<<><<<<>>>><<<>>>><<><<>>><<>>>><<<<>><>>>><>>><>>>><<<><<<<><<<><<<>>><<>>><<>>><>>>><<<>>><<<<><<<<>>><<>><<<<>>><<<>>>><<>>><>><>>>><<><<<><>>><<<>>><>>><<<>><<><<<><>><><<<>>><<>><<<<><><<<<>>>><<<<>>>><<<<><<<>>><<<>><<<>><<<<><>>>><<<<>>>><<<>>><<<<><<<<>><<><<>><<>><<>>><<<<>>><>>><<<<>>>><<<<>>><>>><<<><<<><<<<>><><<>><><<<<><>>><<>>><><<<>>>><>>><<>>>><><<<>>>><>><<><<>><<<<>><<<><<>><>><>><>>><<><<<><><<>><<><<<>>><>>><>><<>><<<>><<><<>>><<><<<<>>><<<>>><<<>>><>><<><>>><<<>>>><<><>><<>>>><<<<><<<<>><<<>>><><>>>><<<>><<<<>>><<<>><<>><<>>><>>><<<>>>><<<>>><<<<>>><<>>><<><<>><<>>>><<<>><<<><<<<>>><<>>><>><<>>>><<<<>>>><<<><><>>><<<>>>><<<<>><><><>>><<<<>>><<><>>>><<<<>>><><<<>>>><<<<>>>><<><<><<<>><<>>>><<<>>>><<>><<<<><>>><<>>>><<>>>><<<<>>><<>>><<<><<><<<>><<<>>>><<><<>>><<<>>><<<>><<<<>>><<<>><>><<<>>>><<<>>>><<<><<<><<>>><<>>>><<<><>><<<>>>><<<<>>><><<><<>>>><><<<>><<<<>><<<>>>><<<<>><>>><<<<>>>><<<>><<<>><>>>><<>><<<>>><<<><<<<><<<<>>>><<>>><<><<>>><<>>><><<<>>>><>>>><<<><<<>>>><>><><>>><<<><>><<<>><<<<>><>><<<>><<>><<>>><<<>>><<>>>><<<<>>>><<<>>><<<<>>><>><<>>><<>>>><>>><<>>>><<<<>>><>>><<<>>>><<>>><<>>>><<<<>>>><<<<>>><><<<>>><<<><<<<><<<>>><<<<>><<<<>><>>><<>>><<>>>><<<<><<<>>><><<<<>><<>>>><><<>>>><<<>><>>><><><<><<<>>><<<<><<<><<<>><<<>>>><<>><<<<>><<<>>><<<<><<<>>><<<<>>>><<>><<<>>>><><<<<>>><<<<>>><<>><<<><<>>><<<<>><<>>>><>>>><<<>>>><<<>>>><>>>><>>><<<>>>><<<<>>><<<><<<><<>><><<<>>>><>>>><<>>><<<>>><<<>><<<<><>><<<>>><>>><<<>>><<<>><<><>><<>>>><>><<>>><>><>>><<<><<>><<<>>><<<<><><>>><<<<>><<<>>><<<<><><>><<<<><<<>>>><<>>><>>>><<<>>><<<<><<<<>>><<<<>>><>>>><<<>><>>>><>>><><<<<>>>><<><<<<>><<<<>>><<>><<<<>><<<>>>><<<<><<>><>>><<<>><<<<><<><<>>><<<><<>>>><<<>><>><<<<><>><>>><";


struct point {
    int x;
    int y;
};

struct rock {
    int size;
    point points[];
};

int jet_count = 0;

inline bool jet_is_left() {
    jet_count += 1;
    return jets[(jet_count - 1) % jets.length()] == '<';
}

rock worm   = {4, {{0, 0}, {0, 1}, {0, 2}, {0, 3}}};
rock cross  = {5, {{0, 1}, {1, 1}, {2, 1}, {1, 2}, {1, 0}}};
rock corner = {5, {{0, 0}, {1, 0}, {2, 0}, {2, 1}, {2,2}}};
rock tower  = {4, {{0, 0}, {0, 1}, {0, 2},{0, 3}}};
rock square = {4, {{0, 0}, {0, 1}, {1, 0}, {1, 1}}};
rock rocks[5] = {worm, cross, corner, tower, square};
long long fallen = 0;

inline rock get_next_rock()
{
    return rocks[fallen % 5];
}

bool colliders[7][100];
int w = 7;
int h = 100;
long long max_height = 0;

inline void create_floor() {
    for(int x = 0; x < w; x++) {
        colliders[x][(-1 % h)] = 1;
    }
}

inline void clear_above() {
    for(int y = 0; y < 6; y++) {
        for(int x = 0; x < w; x++) {
            colliders[x][(max_height + 1 + y) % h] = 0;
        }
    }
}

inline bool can_push_left(rock rock, int x, int y) {
    if(x == 0) return false;

    for(int i = 0; i < rock.size; i++)
    {
        point pt = rock.points[i];
        if(colliders[pt.x + x - 1][(pt.y + y) % h])
        {
            return false;
        }
    }

    return true;
}

inline bool can_push_right(rock rock, int x, int y) {
    

    for(int i = 0; i < rock.size; i++)
    {
        
        point pt = rock.points[i];
        
        if(pt.x + x + 1 > 6) return false;

        cout << "Checking point at " << pt.x << ", " << pt.y << endl;

        if(colliders[pt.x + x + 1][(pt.y + y) % h])
        {
            return false;
        }
    }

    return true;
}

inline bool can_push_down(rock rock, int x, int y) {
    for(int i = 0; i < rock.size; i++)
    {
        point pt = rock.points[i];

        if(colliders[pt.x + x][(pt.y + y - 1) % h])
        {
            return false;
        }
    }

    return true;
}

long long target = 1000000000000;

int main()
{
    create_floor();

    target = 4;
    cout << "test\n";

    // rock loop
    while (fallen < target) {

        rock curr = get_next_rock();
        int x = 2;
        long long y = max_height + 4;

        // fall loop
        while (1) {
            
            if (jet_is_left())
            {
                if(can_push_left(curr, x, y))
                {
                    x -= 1;
                    cout << "I pushed left\n";
                }
            }
            else
            {
                if(can_push_right(curr, x, y))
                {
                    x += 1;
                    cout << "I pushed right\n";
                }
            }

            if (can_push_down(curr, x, y))
            {
                y = y - 1;
            }
            else
            {
                fallen += 1;

                for(int i = 0; i < curr.size; i++)
                {
                    point pt = curr.points[i];
                    colliders[pt.x + x][(pt.y + y) % h] = true;

                    if(pt.y + y > max_height) {
                        max_height = pt.y + y;
                    } 
                }

                break;
            }
        }
    }

    cout << max_height;
}